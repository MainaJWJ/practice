<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>jun0824ì˜ ë¸”ë¡œê·¸</title>

    <link rel="stylesheet" href="windowsXP.css">
    <link rel="stylesheet" href="custom.css">
    <link rel="icon" href="./image/windowslogo.png">
</head>

<body>

    <body id="desktop-body"></body>
    <div class="desktop-icons">

        <a href="./second page.html" class="desktop-icon" data-title="ë‚´ ì»´í“¨í„°" data-icon-url="./image/mycomputer.png" data-open-mode="window">
            <img src="./image/mycomputer.png" alt="ë‚´ ì»´í“¨í„°">
            <span>ë‚´ ì»´í“¨í„°</span>
        </a>


        <a href="./folder.html" class="desktop-icon" data-title="ìƒˆ í´ë”" data-icon-url="./image/folder.png" data-open-mode="window">
            <img src="./image/folder.png" alt="ìƒˆ í´ë”">
            <span>ìƒˆ í´ë”</span>
        </a>


                <a href="https://www.youtube.com/" class="desktop-icon" data-title="Internet Explore" data-icon-url="./image/explore.png" data-open-mode="window">
            <img src="./image/explore.png" alt="ì¸í„°ë„·">
            <span>ì¸í„°ë„·</span>
        </a>


        <a href="./jspaint/index.html" class="desktop-icon" data-title="ê·¸ë¦¼íŒ"  data-icon-url="./image/paint.png" data-open-mode="window">
            <img src="./image/paint.png" alt="ê·¸ë¦¼íŒ">
            <span>ê·¸ë¦¼íŒ</span>
        </a>


        <a href="./texteditor.html" class="desktop-icon" data-title="ë¬¸ì„œí¸ì§‘ê¸°"  data-icon-url="./image/texteditor.png" data-open-mode="window">
            <img src="./image/texteditor.png" alt="ë¬¸ì„œí¸ì§‘ê¸°">
            <span>ë¬¸ì„œí¸ì§‘ê¸°</span>


            <a href="./webamp/index.html" class="desktop-icon" data-title="mediaplayer"  data-icon-url="./image/mediaplayer.png" data-open-mode="window">
                <img src="./image/mediaplayer.png" alt="ë¯¸ë””ì–´">
                <span>ë¯¸ë””ì–´</span>
            </a>


            <a href="./minipaint/index.html" class="desktop-icon" data-title="í¬í† ìƒµ"  data-icon-url="./image/paint.png" data-open-mode="window">
                <img src="./image/paint.png" alt="í¬í† ìƒµ">
                <span>í¬í† ìƒµ</span>
            </a>

            <a href="./ballgame.html" class="desktop-icon" data-title="ê³µì˜ê¸°"  data-icon-url="./image/shell.png" data-open-mode="window">
                <img src="./image/shell.png" alt="ì‰˜">
                <span>ê³µì˜ê¸°</span>
            </a>            

            <a href="./textcounter.html" class="desktop-icon" data-title="ê¸€ììˆ˜ì„¸ê¸°"  data-icon-url="./image/shell.png" data-open-mode="window">
                <img src="./image/shell.png" alt="ì‰˜">
                <span>ê¸€ììˆ˜ì„¸ê¸°</span>
            </a>     


        </a>
    </div>

    <div class="start-menu" id="startMenu">
        <div class="start-menu-header">
            <div class="user-icon-placeholder">ğŸ‘¤</div> <span>User</span>
        </div>
        <div class="start-menu-body">
            <div class="start-menu-left" id="startMenuLeft">
            </div>
            <div class="start-menu-right" id="startMenuRight">
            </div>
        </div>
        <div class="start-menu-footer">
            <button id="logOffButton">
                <span class="footer-icon-placeholder">ğŸ”’</span> <span>Log Off</span>
            </button>
            <button id="turnOffButton">
                <span class="footer-icon-placeholder">â»</span> <span>Turn Off</span>
            </button>
        </div>
    </div>


    <!-- í™”ë©´í•˜ë‹¨ ì‹œì‘ë²„íŠ¼ê³¼ ì‘ì—…íƒ­ -->
    <div class="taskbar">
        <button class="start-button" id="startButton" aria-label="Start"></button>
        <div class="taskbar-windows"></div>


        <!-- ì‘ì—…ë°” ë‚´ë¶€ ê°€ì¥ ì™¼ìª½ì— ë„£ì„ ì•„ì´ì½˜ë“¤ -->
    <div class="notification-icon" id="volume-icon-container">
    <img src="./image/volume.png" alt="ë³¼ë¥¨" title="ë³¼ë¥¨">
        <div class="volume-popup">
            <div class="title-bar">
                <div class="title-bar-text">ë³¼ë¥¨</div>
            </div>
            <div class="window-body">
                <input type="range" id="volume-slider" min="0" max="100" value="75" class="slider">
                <div class="field-row" style="margin-top: 5px;">
                    <input type="checkbox" id="mute-checkbox">
                    <label for="mute-checkbox">ìŒì†Œê±°</label>
                </div>
            </div>
        </div>
    </div>

        <!-- ì‹œê³„ê³µê°„ ë‚´ë¶€ -->
    <div class="taskbar-notification-area">
    <span id="taskbar-clock"></span>
    </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    /* ==========================================================================
       1. ì „ì—­ ë³€ìˆ˜ ë° DOM ìš”ì†Œ
    ========================================================================== */
    const desktopArea = document.getElementById('desktop-area');
    const desktopIcons = document.querySelectorAll('.desktop-icon');
    const taskbarWindows = document.querySelector('.taskbar-windows');
    const startButton = document.getElementById('startButton');
    const startMenu = document.getElementById('startMenu');
    const clockElement = document.getElementById('taskbar-clock');
    let highestZIndex = 100;

    /* ==========================================================================
       2. í•µì‹¬ ê¸°ëŠ¥ í•¨ìˆ˜ (ì°½ ê´€ë¦¬, ì‹œê³„ ë“±)
    ========================================================================== */

    // ì°½ì„ ë§¨ ì•ìœ¼ë¡œ ê°€ì ¸ì˜¤ê³  í™œì„±í™”í•˜ëŠ” í•¨ìˆ˜
    function bringToFront(windowEl) {
        highestZIndex++;
        windowEl.style.zIndex = highestZIndex;
        
        document.querySelectorAll('.taskbar-tab').forEach(tab => tab.classList.remove('active'));
        if (windowEl.taskbarTab && !windowEl.classList.contains('minimized')) {
            windowEl.taskbarTab.classList.add('active');
        }
    }

    // ì‘ì—…í‘œì‹œì¤„ ì‹œê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateClock() {
        const now = new Date();
        let hours = now.getHours();
        let minutes = now.getMinutes();
        let ampm = 'ì˜¤ì „';
        if (hours >= 12) { ampm = 'ì˜¤í›„'; if (hours > 12) hours -= 12; } 
        else if (hours === 0) { hours = 12; }
        minutes = String(minutes).padStart(2, '0');
        if (clockElement) clockElement.textContent = `${ampm} ${hours}:${minutes}`;
    }

    /* ==========================================================================
       3. ì°½ ìƒì„± ë° ìƒí˜¸ì‘ìš© ê´€ë¦¬
    ========================================================================== */
    
    // ìƒˆ ì°½ì„ ë§Œë“œëŠ” ë©”ì¸ í•¨ìˆ˜
    function createWindow(options) {
        const windowEl = document.createElement('div');
        windowEl.className = 'window';
        windowEl.style.cssText = `width: 660px; height: 500px; position: absolute; top: 40px; left: 250px; display: flex; flex-direction: column; padding: 3px`; /* <-- ì´ ì¤„ì„ ì¶”ê°€í•©ë‹ˆë‹¤. */


        const iconHtml = options.iconUrl ? `<img src="${options.iconUrl}" class="title-bar-icon" alt="">` : '';
        windowEl.innerHTML = `
            <div class="title-bar"><div class="title-bar-text">${iconHtml}${options.title}</div><div class="title-bar-controls"><button aria-label="Minimize"></button><button aria-label="Maximize"></button><button aria-label="Close"></button></div></div>
            <div class="window-body" style="flex-grow: 1; padding: 0; margin: 0; min-height: 0;"><iframe src="${options.iframeSrc}" style="width:100%; height:100%; border:0;"></iframe></div>
            <div class="resizer top-left"></div><div class="resizer top-right"></div><div class="resizer bottom-left"></div><div class="resizer bottom-right"></div>
            <div class="resizer top"></div><div class="resizer right"></div><div class="resizer bottom"></div><div class="resizer left"></div>
        `;
        
        document.body.appendChild(windowEl);
        makeWindowInteractive(windowEl, options);
    }

    // ì°½ì— ëª¨ë“  ìƒí˜¸ì‘ìš©(ë“œë˜ê·¸, ë¦¬ì‚¬ì´ì¦ˆ, ë²„íŠ¼) ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
    function makeWindowInteractive(win, options) {
        const titleBar = win.querySelector('.title-bar');
        const minimizeButton = win.querySelector('button[aria-label="Minimize"]');
        const maximizeButton = win.querySelector('button[aria-label="Maximize"]');
        const closeButton = win.querySelector('button[aria-label="Close"]');
        let isMaximized = false;
        let originalState = {};

// ì‘ì—…í‘œì‹œì¤„ íƒ­ ìƒì„± ë° ì—°ê²°
const taskbarTab = document.createElement('button');
taskbarTab.className = 'taskbar-tab';

// ì•„ì´ì½˜ì´ ìˆì„ ê²½ìš°ì—ë§Œ img íƒœê·¸ë¥¼ ì¶”ê°€
if (options.iconUrl) {
    taskbarTab.innerHTML = `<img src="${options.iconUrl}" class="taskbar-tab-icon">`;
}
// í…ìŠ¤íŠ¸ëŠ” span íƒœê·¸ë¡œ ê°ì‹¸ì„œ ì¶”ê°€
taskbarTab.innerHTML += `<span>${options.title}</span>`;

taskbarWindows.appendChild(taskbarTab);
win.taskbarTab = taskbarTab;

        // ë“œë˜ê·¸ ê¸°ëŠ¥
        let isDragging = false;
        let dragOffsetX, dragOffsetY;
        titleBar.addEventListener('mousedown', (e) => {
            if (isMaximized || e.target.closest('.title-bar-controls')) return;
            isDragging = true;
            dragOffsetX = e.clientX - win.offsetLeft;
            dragOffsetY = e.clientY - win.offsetTop;
            bringToFront(win);
            document.addEventListener('mousemove', onDrag);
            document.addEventListener('mouseup', onStopDrag, { once: true });
        });
        const onDrag = (e) => { if (isDragging) { win.style.left = `${e.clientX - dragOffsetX}px`; win.style.top = `${e.clientY - dragOffsetY}px`; } };
        const onStopDrag = () => { isDragging = false; document.removeEventListener('mousemove', onDrag); };
        
        // í¬ê¸° ì¡°ì ˆ ê¸°ëŠ¥ (ì„±ëŠ¥ ìµœì í™” í¬í•¨)
        win.querySelectorAll('.resizer').forEach(resizer => {
            resizer.addEventListener('mousedown', (e) => {
                if (isMaximized) return;
                e.preventDefault();
                let startX = e.clientX, startY = e.clientY;
                let startWidth = win.offsetWidth, startHeight = win.offsetHeight;
                let startLeft = win.offsetLeft, startTop = win.offsetTop;
                let lastMouseEvent = e;
                let animationFrameId = null;
                
                bringToFront(win);
                resizer.classList.add('is-resizing');

                const updateSize = () => {
                    const dx = lastMouseEvent.clientX - startX, dy = lastMouseEvent.clientY - startY;
                    if (resizer.classList.contains('right') || resizer.classList.contains('bottom-right') || resizer.classList.contains('top-right')) win.style.width = `${startWidth + dx}px`;
                    if (resizer.classList.contains('bottom') || resizer.classList.contains('bottom-right') || resizer.classList.contains('bottom-left')) win.style.height = `${startHeight + dy}px`;
                    if (resizer.classList.contains('left') || resizer.classList.contains('bottom-left') || resizer.classList.contains('top-left')) { win.style.width = `${startWidth - dx}px`; win.style.left = `${startLeft + dx}px`; }
                    if (resizer.classList.contains('top') || resizer.classList.contains('top-right') || resizer.classList.contains('top-left')) { win.style.height = `${startHeight - dy}px`; win.style.top = `${startTop + dy}px`; }
                    animationFrameId = null;
                };
                const onResize = (e) => {
                    lastMouseEvent = e;
                    if (animationFrameId === null) {
                        animationFrameId = requestAnimationFrame(updateSize);
                    }
                };
                const onStopResize = () => {
                    resizer.classList.remove('is-resizing');
                    if (animationFrameId) cancelAnimationFrame(animationFrameId);
                    document.removeEventListener('mousemove', onResize);
                };
                document.addEventListener('mousemove', onResize);
                document.addEventListener('mouseup', onStopResize, { once: true });
            });
        });

        // ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ê¸°ëŠ¥
        closeButton.addEventListener('click', () => { win.remove(); taskbarTab.remove(); });
        maximizeButton.addEventListener('click', () => {
            if (!isMaximized) originalState = { top: win.style.top, left: win.style.left, width: win.style.width, height: win.style.height };
            isMaximized = !isMaximized; win.classList.toggle('maximized', isMaximized);
            if (!isMaximized) Object.assign(win.style, originalState);
            maximizeButton.setAttribute('aria-label', isMaximized ? 'Restore' : 'Maximize');
        });
        minimizeButton.addEventListener('click', () => { win.classList.add('minimized'); taskbarTab.classList.remove('active'); });

        // ì‘ì—…í‘œì‹œì¤„ íƒ­ ê¸°ëŠ¥
        taskbarTab.addEventListener('click', () => {
            const isMinimized = win.classList.contains('minimized');
            const isAlreadyActive = win.style.zIndex == highestZIndex && !isMinimized;
            if (isAlreadyActive) {
                win.classList.add('minimized'); taskbarTab.classList.remove('active');
            } else {
                win.classList.remove('minimized'); bringToFront(win);
            }
        });

        // ì°½ í™œì„±í™” ê¸°ëŠ¥
        win.addEventListener('mousedown', () => bringToFront(win), true);
        
        bringToFront(win); // ìƒì„± ì‹œ ë§¨ ì•ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°
    }

    /* ==========================================================================
       4. ë°ìŠ¤í¬í†± ì•„ì´ì½˜ ë° ì´ë²¤íŠ¸
       ========================================================================== */
    desktopIcons.forEach(icon => {
        let clickTimer = null;
        icon.addEventListener('click', function(e) {
            e.preventDefault();
            if (clickTimer) {
                clearTimeout(clickTimer); clickTimer = null;
                if (this.dataset.openMode === 'window') {
                    createWindow({ title: this.dataset.title || 'ìƒˆ ì°½', iframeSrc: this.href, iconUrl: this.dataset.iconUrl });
                } else if (this.href && this.href.slice(-1) !== "#") { window.open(this.href, '_blank'); }
            } else {
                clickTimer = setTimeout(() => {
                    clickTimer = null;
                    desktopIcons.forEach(otherIcon => otherIcon.classList.remove('selected'));
                    this.classList.add('selected');
                }, 200);
            }
        });
    });

    document.body.addEventListener('click', (e) => {
        if (!e.target.closest('.desktop-icon') && !e.target.closest('.window') && !e.target.closest('.start-menu')) {
            desktopIcons.forEach(icon => icon.classList.remove('selected'));
        }
    });

    // --- ë“œë˜ê·¸ ì„ íƒ ê¸°ëŠ¥ ---
    // (ì´ì „ ë‹µë³€ì—ì„œ ì œê³µí•œ ì½”ë“œëŠ” ì—¬ê¸°ì— í¬í•¨ë©ë‹ˆë‹¤. í•„ìš”ì‹œ ì£¼ì„ í•´ì œ)

/* ==========================================================================
       5. ì‹œì‘ ë©”ë‰´ ê¸°ëŠ¥
       ========================================================================== */
    const startMenuLeft = document.getElementById('startMenuLeft');
    const startMenuRight = document.getElementById('startMenuRight');

    const appLinks = [
        { name: 'ë„¤ì´ë²„', url: 'https://www.naver.com/', icon: 'ğŸŒ', type: 'internet' },
        { name: 'êµ¬ê¸€', url: 'https://www.google.co.kr/', icon: 'ğŸ”', type: 'main' },
        { name: 'ë‚´ ë¬¸ì„œ', url: '#', icon: 'ğŸ“', type: 'my' },
        { name: 'ë‚´ ìµœê·¼ ë¬¸ì„œ', url: '#', icon: 'ğŸ“‘', type: 'my' },
        { name: 'ë‚´ ê·¸ë¦¼', url: '#', icon: 'ğŸŒ„', type: 'my' },
        { name: 'ë‚´ ìŒì•…', url: '#', icon: 'ğŸµ', type: 'my' },
        { name: 'ë‚´ ì»´í“¨í„°', url: '#', icon: 'ğŸ’»', type: 'my' },
        { name: 'ì œì–´íŒ', url: '#', icon: 'âš™ï¸', type: 'settings' },
        { name: 'ì—°ê²° ëŒ€ìƒ', url: '#', icon: 'ğŸ”—', type: 'settings' },
        { name: 'í”„ë¦°í„° ë° íŒ©ìŠ¤', url: '#', icon: 'ğŸ“ ', type: 'settings' },
        { name: 'ë„ì›€ë§ ë° ì§€ì›', url: '#', icon: 'â“', type: 'support' },
        { name: 'ê²€ìƒ‰', url: '#', icon: 'ğŸ”', type: 'support' },
        { name: 'ì‹¤í–‰...', url: '#', icon: 'ğŸš€', type: 'support' },
    ];

    function createMenuItem(linkData, isBold = false) {
        const linkElement = document.createElement('a');
        linkElement.classList.add('start-menu-item');
        linkElement.href = linkData.url;
        if (linkData.url && linkData.url !== '#') {
            linkElement.target = '_blank';
        }

        const iconElement = document.createElement('span');
        iconElement.classList.add('menu-icon-placeholder');
        iconElement.textContent = linkData.icon || '';

        const textElement = document.createElement('span');
        textElement.textContent = linkData.name;
        if (isBold) textElement.style.fontWeight = 'bold';

        linkElement.appendChild(iconElement);
        linkElement.appendChild(textElement);

        if (linkData.type === 'all') {
            linkElement.dataset.type = 'all';
            linkElement.addEventListener('click', (e) => {
                e.preventDefault();
                alert('ëª¨ë“  í”„ë¡œê·¸ë¨ ê¸°ëŠ¥ì€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            });
        }
        return linkElement;
    }

    function createSeparator() {
        const separator = document.createElement('div');
        separator.classList.add('start-menu-separator');
        return separator;
    }

    function renderStartMenu() {
        startMenuLeft.innerHTML = '';
        startMenuRight.innerHTML = '';

        appLinks.filter(link => link.type === 'internet').forEach(link => startMenuLeft.appendChild(createMenuItem(link, true)));
        startMenuLeft.appendChild(createSeparator());
        appLinks.filter(link => link.type === 'main').forEach(link => startMenuLeft.appendChild(createMenuItem(link)));
        startMenuLeft.appendChild(createSeparator());
        startMenuLeft.appendChild(createMenuItem({ name: 'ëª¨ë“  í”„ë¡œê·¸ë¨', icon: 'â–¶', url: '#', type: 'all' }, true));

        appLinks.filter(link => link.type === 'my').forEach(link => startMenuRight.appendChild(createMenuItem(link)));
        startMenuRight.appendChild(createSeparator());
        appLinks.filter(link => link.type === 'settings').forEach(link => startMenuRight.appendChild(createMenuItem(link)));
        startMenuRight.appendChild(createSeparator());
        appLinks.filter(link => link.type === 'support').forEach(link => startMenuRight.appendChild(createMenuItem(link)));
    }

    startButton.addEventListener('click', (e) => {
        e.stopPropagation();
        startMenu.classList.toggle('show');
    });
    
    // ì´ ë¶€ë¶„ì€ ì´ë¯¸ ìƒë‹¨ì— document.addEventListener('click', ...) ìœ¼ë¡œ í†µí•©ë˜ì–´ ìˆìœ¼ë¯€ë¡œ,
    // ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•´ ì—¬ê¸°ì„œëŠ” ì œê±°í•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    // document.addEventListener('click', (e) => {
    //     if (!startMenu.contains(e.target) && !startButton.contains(e.target)) {
    //         startMenu.classList.remove('show');
    //     }
    // });
    
    renderStartMenu(); // ë©”ë‰´ ì•„ì´í…œì„ ì‹¤ì œë¡œ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
    
    // --- ì´ˆê¸°í™” ì‹¤í–‰ ---
    updateClock();
    setInterval(updateClock, 1000);
    renderStartMenu(); // ì‹œì‘ ë©”ë‰´ ë‚´ìš© ìƒì„±



    /* ==========================================================================
       6. ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (ì˜¤ë¥¸ìª½ í´ë¦­ ë©”ë‰´) ê¸°ëŠ¥
       ========================================================================== */
    let currentContextMenu = null;

    // ê¸°ì¡´ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜
    function removeContextMenu() {
        if (currentContextMenu) {
            currentContextMenu.remove();
            currentContextMenu = null;
        }
    }

    // ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ë¥¼ ìƒì„±í•˜ê³  í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function createContextMenu(items, x, y) {
        removeContextMenu(); // ê¸°ì¡´ ë©”ë‰´ê°€ ìˆë‹¤ë©´ ì œê±°

        const menu = document.createElement('ul');
        menu.className = 'context-menu';
        
        items.forEach(item => {
            const li = document.createElement('li');
            if (item.separator) {
                li.className = 'context-menu-separator';
            } else {
                li.className = 'context-menu-item';
                li.textContent = item.text;
                if (item.action) {
                    li.addEventListener('click', item.action);
                }
            }
            menu.appendChild(li);
        });

        // ë©”ë‰´ê°€ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡ ìœ„ì¹˜ ì¡°ì ˆ
        document.body.appendChild(menu);
        const menuWidth = menu.offsetWidth;
        const menuHeight = menu.offsetHeight;
        if (x + menuWidth > window.innerWidth) {
            x = window.innerWidth - menuWidth;
        }
        if (y + menuHeight > window.innerHeight) {
            y = window.innerHeight - menuHeight;
        }
        menu.style.left = `${x}px`;
        menu.style.top = `${y}px`;
        
        currentContextMenu = menu;
    }
    
    // ë°”íƒ•í™”ë©´ì— í‘œì‹œë  ë©”ë‰´ í•­ëª©ë“¤ ì •ì˜
    const desktopMenuItems = [
        { text: 'ì•„ì´ì½˜ ì •ë ¬ ìˆœì„œ' },
        { separator: true },
        { text: 'ìƒˆë¡œ ê³ ì¹¨', action: () => location.reload() },
        { separator: true },
        { text: 'ìƒˆë¡œ ë§Œë“¤ê¸°' },
        { separator: true },
        { text: 'ì†ì„±' }
    ];

    // ë°”íƒ•í™”ë©´ì— contextmenu(ì˜¤ë¥¸ìª½ í´ë¦­) ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    document.body.addEventListener('contextmenu', (e) => {
        // ì•„ì´ì½˜ì´ë‚˜ ì°½ ìœ„ê°€ ì•„ë‹Œ, ë°”íƒ•í™”ë©´ ë¹ˆ ê³³ì—ì„œë§Œ ì‹¤í–‰
        if (!e.target.closest('.desktop-icon') && !e.target.closest('.window')) {
            e.preventDefault(); // ë¸Œë¼ìš°ì € ê¸°ë³¸ ë©”ë‰´ ë¹„í™œì„±í™”
            createContextMenu(desktopMenuItems, e.clientX, e.clientY);
        }
    });

    // ë‹¤ë¥¸ ê³³ì„ í´ë¦­í•˜ë©´ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ë‹«ê¸°
    document.addEventListener('click', (e) => {
        if (currentContextMenu && !currentContextMenu.contains(e.target)) {
            removeContextMenu();
        }
    });
    /* ==========================================================================
       7. ì•Œë¦¼ ì˜ì—­ ê¸°ëŠ¥ (ë³¼ë¥¨ ì¡°ì ˆ)
       ========================================================================== */
    const volumeIconContainer = document.getElementById('volume-icon-container');
    const volumePopup = volumeIconContainer.querySelector('.volume-popup');
    const volumeSlider = document.getElementById('volume-slider');
    const muteCheckbox = document.getElementById('mute-checkbox');

    // ë³¼ë¥¨ ì•„ì´ì½˜ í´ë¦­ ì‹œ íŒì—… í† ê¸€
    volumeIconContainer.addEventListener('click', (e) => {
        e.stopPropagation(); // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
        volumePopup.classList.toggle('show');
    });

    // ë³¼ë¥¨ ìŠ¬ë¼ì´ë”ë‚˜ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ íŒì—…ì´ ë‹«íˆì§€ ì•Šë„ë¡ í•¨
    volumePopup.addEventListener('click', (e) => {
        e.stopPropagation();
    });

    // ë‹¤ë¥¸ ê³³ì„ í´ë¦­í•˜ë©´ íŒì—… ë‹«ê¸°
    // (ê¸°ì¡´ ì „ì—­ í´ë¦­ ë¦¬ìŠ¤ë„ˆì— í†µí•©)
    document.addEventListener('click', (e) => {
        // ... (ê¸°ì¡´ ì½”ë“œ: ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´, ì‹œì‘ ë©”ë‰´ ë‹«ê¸°)
        
        // ë³¼ë¥¨ íŒì—… ë‹«ê¸° ë¡œì§ ì¶”ê°€
        if (volumePopup.classList.contains('show') && !volumeIconContainer.contains(e.target)) {
            volumePopup.classList.remove('show');
        }
    });

    // (ì˜ˆì‹œ) ìŠ¬ë¼ì´ë” ê°’ ë³€ê²½ ì‹œ ì½˜ì†”ì— ë¡œê·¸ ì¶œë ¥
    volumeSlider.addEventListener('input', (e) => {
        console.log('ë³¼ë¥¨:', e.target.value);
        // ì‹¤ì œ ì˜¤ë””ì˜¤ ê°ì²´ê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ë³¼ë¥¨ì„ ì¡°ì ˆí•©ë‹ˆë‹¤.
        // audio.volume = e.target.value / 100;
    });

    // (ì˜ˆì‹œ) ìŒì†Œê±° ì²´í¬ ì‹œ ì½˜ì†”ì— ë¡œê·¸ ì¶œë ¥
    muteCheckbox.addEventListener('change', (e) => {
        console.log('ìŒì†Œê±°:', e.target.checked);
        // audio.muted = e.target.checked;
    });
});





</script>

</body>

</html>